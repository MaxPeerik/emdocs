Initial 5 release. This release requires running on Java 8; from now on Java 7 is no longer supported.
## New features
- The runtime now supports OSGi Declarative Services. This is a requirement for running Apache ActiveMQ Artemis, meaning you must switch to version 5.0.0 of the runtime if you want to deploy an Artemis server. All other flows will still run fine on version 4.2.1, but if you want to switch to Java 8 (more info below) it might be more practical to update to 5.0.0 as well.
## Major changes
- Improved resistance to unexpected shutdown breaking stored configurations. In even more failure scenarios, a runtime will now be able to restart properly. (#285445, 271413)
- Java 8 is required to run this release. Since runtime version 4.1.6 (released 2017-06-30) it was possible to run on either Java 7 or Java 8: both were fully supported. Starting with this runtime release, only Java 8 is supported. Flows can still be deployed on Java 7 however, so there is no need to immediately update your existing runtimes. The exception to this rule are flows that contain any of: WS-Security, Batch jobs connecting with Azure Event Hubs, Artemis server, or Qpid JMS connection factories.
## Minor changes
- Updated Apache Karaf to version 4.2.0
- During startup, the eMagiz runtime version and Java version are logged to both the local log file as well as eMagiz iPaaS. (#138124)
- When entering commands on the command prompt, syntax highlighting is applied while typing.
- When viewing the log on the command prompt, the information is more compact and the colours for the different log levels are more clear.
## Bug fixes
- Protocol "SSLv2Hello" has been completely disabled again. (#317913)
- For on-premises deployments: fixed that (local) SSH access was not working. Note that for security reasons SSH is disabled by default. To enable it, change setting "karaf.startRemoteShell" in "bin/karaf(.bat)" and "bin/install-service(.bat)" from 'false' to 'true'. Also make sure you are assigning a unique port number to each runtime; this can be configured by changing setting "sshPort" (default: 8101) in "etc/org.apache.karaf.shell.cfg".
## Remarks
- Old flows that are still running on Spring 2 should be updated before deploying on Java 8, because that combination of versions is not supported (although it will probably work). This can be checked by comparing the build number (the fourth and last number of the full version number) of your deployment packages: build number 23 and higher uses Spring 4, which means it is compatible with both Java 7 and Java 8, while build number 22 (or lower) uses Spring 2, which means it can only run on Java 7. Note that hybrid bus installations - some runtimes on Java 7 and others on Java 8 - are perfectly fine. This also allows for incrementally updating your existing buses one runtime at a time.
- Your message bus might still contain the property 'emagiz.extension.spring2.compatibility'. This property was automatically added to all existing message buses in November last year to make sure that Spring 4 flows (build number 23 and higher) could still correctly communicate with old Spring 2 flows (build number 22 or lower). Hopefully, by now, your bus is fully running on Spring 4 (i.e. no deployment packages with build number 22 or lower and no eMagiz Mendix Connectors before version 2.4.0). In which case you should remove the 'emagiz.extension.spring2.compatibility' property. Removing the compatibility mode can moderately increase the performance of your bus processes.
- The eMagiz runtime uses the JAVA_HOME system property to select the Java runtime version. Normally, the Java installer sets this property globally on the machine, but for each individual eMagiz runtime the JAVA_HOME property can be changed in "/etc/setenv(.bat)". If JAVA_HOME is not set, the eMagiz runtime has other means of locating Java on your machine. If multiple Java versions are installed and JAVA_HOME is not set, it cannot be guaranteed that your preferred Java version is used. So, it is recommended to make sure JAVA_HOME is (correctly) set.
